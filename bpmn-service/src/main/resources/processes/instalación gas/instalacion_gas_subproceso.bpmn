<?xml version="1.0" encoding="UTF-8"?>
<bpmn:definitions xmlns:bpmn="http://www.omg.org/spec/BPMN/20100524/MODEL" xmlns:bpmndi="http://www.omg.org/spec/BPMN/20100524/DI" xmlns:dc="http://www.omg.org/spec/DD/20100524/DC" xmlns:di="http://www.omg.org/spec/DD/20100524/DI" xmlns:camunda="http://camunda.org/schema/1.0/bpmn" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:modeler="http://camunda.org/schema/modeler/1.0" id="Definitions_0us9cyp" targetNamespace="http://bpmn.io/schema/bpmn" exporter="Camunda Modeler" exporterVersion="5.39.0" modeler:executionPlatform="Camunda Platform" modeler:executionPlatformVersion="7.23.0">
  <bpmn:collaboration id="Collaboration_0v8kt2o">
    <bpmn:participant id="Participant_1b1qflu" name="Gas Corocora" processRef="Process_19yx4pt" />
  </bpmn:collaboration>
  <bpmn:error id="Error_CotizacionRechazada" name="CotizacionRechazada" errorCode="COTIZACION_RECHAZADA" />
  <bpmn:process id="Process_19yx4pt" isExecutable="true" camunda:historyTimeToLive="180">
    <bpmn:laneSet id="LaneSet_1pj4h9u">
      <bpmn:lane id="Lane_0w8w1ma" name="Área de facturación">
        <bpmn:flowNodeRef>Event_1rrkmi5</bpmn:flowNodeRef>
        <bpmn:flowNodeRef>Gateway_0jemd6s</bpmn:flowNodeRef>
        <bpmn:flowNodeRef>Gateway_0nbqqpr</bpmn:flowNodeRef>
        <bpmn:flowNodeRef>Activity_03ums6g</bpmn:flowNodeRef>
        <bpmn:flowNodeRef>Activity_RegistrarPago</bpmn:flowNodeRef>
        <bpmn:flowNodeRef>Activity_0m1oi6g</bpmn:flowNodeRef>
      </bpmn:lane>
      <bpmn:lane id="Lane_1nl7999">
        <bpmn:flowNodeRef>Event_0jslj8w</bpmn:flowNodeRef>
        <bpmn:flowNodeRef>Activity_15qhpg1</bpmn:flowNodeRef>
        <bpmn:flowNodeRef>Activity_0kcw96s</bpmn:flowNodeRef>
        <bpmn:flowNodeRef>Activity_1fb1qex</bpmn:flowNodeRef>
        <bpmn:flowNodeRef>Event_067suwh</bpmn:flowNodeRef>
      </bpmn:lane>
      <bpmn:lane id="Lane_08ikb7q" name="Área Técnica">
        <bpmn:flowNodeRef>Activity_0l33lbs</bpmn:flowNodeRef>
        <bpmn:flowNodeRef>Activity_00brnnm</bpmn:flowNodeRef>
        <bpmn:flowNodeRef>Gateway_00gps96</bpmn:flowNodeRef>
        <bpmn:flowNodeRef>Event_1bf9n2z</bpmn:flowNodeRef>
        <bpmn:flowNodeRef>Gateway_1lfx28d</bpmn:flowNodeRef>
        <bpmn:flowNodeRef>Gateway_1s9wwrt</bpmn:flowNodeRef>
        <bpmn:flowNodeRef>Task_LimpiarVariablesVerificacion</bpmn:flowNodeRef>
        <bpmn:flowNodeRef>Activity_0tp7mb7</bpmn:flowNodeRef>
        <bpmn:flowNodeRef>Activity_06zg5v5</bpmn:flowNodeRef>
        <bpmn:flowNodeRef>Activity_11hbts6</bpmn:flowNodeRef>
        <bpmn:flowNodeRef>Activity_ConfirmarInstalacion</bpmn:flowNodeRef>
      </bpmn:lane>
      <bpmn:lane id="Lane_1bavo0y" name="Área Comercial">
        <bpmn:flowNodeRef>Activity_1t7kyo3</bpmn:flowNodeRef>
        <bpmn:flowNodeRef>Gateway_084d3e1</bpmn:flowNodeRef>
        <bpmn:flowNodeRef>Activity_0yj174j</bpmn:flowNodeRef>
        <bpmn:flowNodeRef>Event_0h6leqx</bpmn:flowNodeRef>
        <bpmn:flowNodeRef>Activity_0zzargi</bpmn:flowNodeRef>
        <bpmn:flowNodeRef>Activity_RegistrarPagoDB</bpmn:flowNodeRef>
        <bpmn:flowNodeRef>Event_0dkq5n9</bpmn:flowNodeRef>
        <bpmn:flowNodeRef>Activity_055uyhj</bpmn:flowNodeRef>
      </bpmn:lane>
    </bpmn:laneSet>
    <bpmn:startEvent id="Event_0jslj8w" name="Solicitud de conexión recibida">
      <bpmn:outgoing>Flow_0cts4f7</bpmn:outgoing>
    </bpmn:startEvent>
    <bpmn:userTask id="Activity_15qhpg1" name="Radicar solicitud en el sistema" camunda:formRef="radicar-solicitud" camunda:formRefBinding="latest">
      <bpmn:incoming>Flow_0cts4f7</bpmn:incoming>
      <bpmn:outgoing>Flow_1nq3u56</bpmn:outgoing>
    </bpmn:userTask>
    <bpmn:sendTask id="Activity_0l33lbs" name="Notificar solicitud inviable" camunda:delegateExpression="#{notificarSolicitudInviableDelegate}">
      <bpmn:incoming>Flow_0wgmzpg</bpmn:incoming>
      <bpmn:outgoing>Flow_1s900fz</bpmn:outgoing>
    </bpmn:sendTask>
    <bpmn:subProcess id="Activity_1t7kyo3" name="Procesar cotización">
      <bpmn:incoming>Flow_1u7ybih</bpmn:incoming>
      <bpmn:outgoing>Flow_1bz2fvf</bpmn:outgoing>
      <bpmn:startEvent id="Event_02ojq7g" name="Verificación de viabilidad recibida">
        <bpmn:outgoing>Flow_1ks2bm8</bpmn:outgoing>
      </bpmn:startEvent>
      <bpmn:businessRuleTask id="Activity_1o1qnmd" name="Elaborar cotización" camunda:resultVariable="cotizacion_result" camunda:decisionRef="Decision_cotizacion">
        <bpmn:extensionElements>
          <camunda:inputOutput>
            <camunda:outputParameter name="conexion">${cotizacion_result[0].conexion}</camunda:outputParameter>
            <camunda:outputParameter name="conexion_a_pagar">${cotizacion_result[0].conexion_a_pagar}</camunda:outputParameter>
            <camunda:outputParameter name="descuento">${cotizacion_result[0].descuento}</camunda:outputParameter>
          </camunda:inputOutput>
        </bpmn:extensionElements>
        <bpmn:incoming>Flow_1ks2bm8</bpmn:incoming>
        <bpmn:outgoing>Flow_1wgzvas</bpmn:outgoing>
      </bpmn:businessRuleTask>
      <bpmn:sequenceFlow id="Flow_1ks2bm8" sourceRef="Event_02ojq7g" targetRef="Activity_1o1qnmd" />
      <bpmn:endEvent id="Event_0216onw" name="Cotización enviada">
        <bpmn:incoming>Flow_0j7gz72</bpmn:incoming>
      </bpmn:endEvent>
      <bpmn:sendTask id="Activity_0068azp" name="Enviar cotización al cliente" camunda:delegateExpression="#{enviarCotizacionDelegate}">
        <bpmn:incoming>Flow_1wgzvas</bpmn:incoming>
        <bpmn:outgoing>Flow_0j7gz72</bpmn:outgoing>
      </bpmn:sendTask>
      <bpmn:sequenceFlow id="Flow_0j7gz72" sourceRef="Activity_0068azp" targetRef="Event_0216onw" />
      <bpmn:sequenceFlow id="Flow_1wgzvas" sourceRef="Activity_1o1qnmd" targetRef="Activity_0068azp" />
    </bpmn:subProcess>
    <bpmn:exclusiveGateway id="Gateway_084d3e1" name="Cotización aceptada?">
      <bpmn:incoming>Flow_0ho7m4x</bpmn:incoming>
      <bpmn:outgoing>Flow_06rpsa3</bpmn:outgoing>
      <bpmn:outgoing>Flow_03r38nm</bpmn:outgoing>
    </bpmn:exclusiveGateway>
    <bpmn:userTask id="Activity_0kcw96s" name="Enviar respuesta de cotización" camunda:formRef="respuesta-cotizacion" camunda:formRefBinding="latest">
      <bpmn:incoming>Flow_1bz2fvf</bpmn:incoming>
      <bpmn:outgoing>Flow_0ho7m4x</bpmn:outgoing>
    </bpmn:userTask>
    <bpmn:userTask id="Activity_00brnnm" name="Verificar cobertura" camunda:formRef="verificar-cobertura" camunda:formRefBinding="latest">
      <bpmn:incoming>Flow_1kzaz5a</bpmn:incoming>
      <bpmn:outgoing>Flow_1ecinfq</bpmn:outgoing>
    </bpmn:userTask>
    <bpmn:exclusiveGateway id="Gateway_00gps96" name="¿La zona cuenta con red de gas?">
      <bpmn:incoming>Flow_1ecinfq</bpmn:incoming>
      <bpmn:outgoing>Flow_1u7ybih</bpmn:outgoing>
      <bpmn:outgoing>Flow_0wgmzpg</bpmn:outgoing>
    </bpmn:exclusiveGateway>
    <bpmn:endEvent id="Event_1bf9n2z" name="Solicitud rechazada por inviabilidad">
      <bpmn:incoming>Flow_1s900fz</bpmn:incoming>
    </bpmn:endEvent>
    <bpmn:serviceTask id="Activity_0yj174j" name="Cancelar solicitud" camunda:delegateExpression="#{cancelarSolicitudDelegate}">
      <bpmn:incoming>Flow_1j0dbx9</bpmn:incoming>
      <bpmn:outgoing>Flow_0rf11jx</bpmn:outgoing>
    </bpmn:serviceTask>
    <bpmn:endEvent id="Event_0h6leqx" name="Solicitud abandonad">
      <bpmn:incoming>Flow_0rf11jx</bpmn:incoming>
    </bpmn:endEvent>
    <bpmn:userTask id="Activity_0zzargi" name="Recibir pago de instalación" camunda:formRef="registro-pago" camunda:formRefBinding="latest">
      <bpmn:incoming>Flow_03r38nm</bpmn:incoming>
      <bpmn:outgoing>Flow_1xfk6vi</bpmn:outgoing>
    </bpmn:userTask>
    <bpmn:serviceTask id="Activity_RegistrarPagoDB" name="Registrar pago">
      <bpmn:extensionElements>
        <camunda:connector>
          <camunda:inputOutput>
            <camunda:inputParameter name="url">http://localhost:8083/api/facturacion/pago</camunda:inputParameter>
            <camunda:inputParameter name="method">POST</camunda:inputParameter>
            <camunda:inputParameter name="headers">
              <camunda:map>
                <camunda:entry key="Content-Type">application/json</camunda:entry>
              </camunda:map>
            </camunda:inputParameter>
            <camunda:inputParameter name="payload">
              <camunda:script scriptFormat="JavaScript">
var facturacion = {
  "businessKey": execution.getBusinessKey(),
  "cedulaCliente": execution.getVariable("cedulaCliente"),
  "montoRecibido": execution.getVariable("monto_recibido"),
  "metodoPago": execution.getVariable("metodo_pago"),
  "numeroTransaccion": execution.getVariable("numero_transaccion"),
  "fechaPago": execution.getVariable("fecha_pago"),
  "comprobanteUrl": execution.getVariable("comprobante_url"),
  "observacionesPago": execution.getVariable("observaciones_pago")
};
JSON.stringify(facturacion);
              </camunda:script>
            </camunda:inputParameter>
            <camunda:outputParameter name="facturacionId">
              <camunda:script scriptFormat="JavaScript">
var response = connector.getVariable("response");
if (response) {
  var json = S(response);
  if (json.hasProp("id")) {
    json.prop("id").numberValue();
  } else {
    null;
  }
} else {
  null;
}
              </camunda:script>
            </camunda:outputParameter>
          </camunda:inputOutput>
          <camunda:connectorId>http-connector</camunda:connectorId>
        </camunda:connector>
      </bpmn:extensionElements>
      <bpmn:incoming>Flow_1xfk6vi</bpmn:incoming>
      <bpmn:outgoing>Flow_1y9d7mi</bpmn:outgoing>
    </bpmn:serviceTask>
    <bpmn:endEvent id="Event_0dkq5n9" name="Solicitud rechazada">
      <bpmn:incoming>Flow_1p63p4i</bpmn:incoming>
    </bpmn:endEvent>
    <bpmn:boundaryEvent id="Event_067suwh" name="5 días" attachedToRef="Activity_0kcw96s">
      <bpmn:outgoing>Flow_1j0dbx9</bpmn:outgoing>
      <bpmn:timerEventDefinition id="TimerEventDefinition_1mdlia8">
        <bpmn:timeDuration xsi:type="bpmn:tFormalExpression">P5D</bpmn:timeDuration>
      </bpmn:timerEventDefinition>
    </bpmn:boundaryEvent>
    <bpmn:sequenceFlow id="Flow_0cts4f7" sourceRef="Event_0jslj8w" targetRef="Activity_15qhpg1" />
    <bpmn:sequenceFlow id="Flow_1nq3u56" sourceRef="Activity_15qhpg1" targetRef="Activity_1fb1qex" />
    <bpmn:sequenceFlow id="Flow_1kzaz5a" sourceRef="Activity_1fb1qex" targetRef="Activity_00brnnm" />
    <bpmn:sequenceFlow id="Flow_0wgmzpg" name="no" sourceRef="Gateway_00gps96" targetRef="Activity_0l33lbs">
      <bpmn:conditionExpression xsi:type="bpmn:tFormalExpression">${cobertura == false}</bpmn:conditionExpression>
    </bpmn:sequenceFlow>
    <bpmn:sequenceFlow id="Flow_1s900fz" sourceRef="Activity_0l33lbs" targetRef="Event_1bf9n2z" />
    <bpmn:sequenceFlow id="Flow_1u7ybih" name="si" sourceRef="Gateway_00gps96" targetRef="Activity_1t7kyo3">
      <bpmn:conditionExpression xsi:type="bpmn:tFormalExpression">${cobertura == true}</bpmn:conditionExpression>
    </bpmn:sequenceFlow>
    <bpmn:sequenceFlow id="Flow_1bz2fvf" sourceRef="Activity_1t7kyo3" targetRef="Activity_0kcw96s" />
    <bpmn:sequenceFlow id="Flow_0ho7m4x" sourceRef="Activity_0kcw96s" targetRef="Gateway_084d3e1" />
    <bpmn:sequenceFlow id="Flow_06rpsa3" name="no" sourceRef="Gateway_084d3e1" targetRef="Activity_055uyhj">
      <bpmn:conditionExpression xsi:type="bpmn:tFormalExpression">${cotizacion_aceptada == "false"}</bpmn:conditionExpression>
    </bpmn:sequenceFlow>
    <bpmn:sequenceFlow id="Flow_03r38nm" name="si" sourceRef="Gateway_084d3e1" targetRef="Activity_0zzargi">
      <bpmn:conditionExpression xsi:type="bpmn:tFormalExpression">${cotizacion_aceptada == "true"}</bpmn:conditionExpression>
    </bpmn:sequenceFlow>
    <bpmn:sequenceFlow id="Flow_1ecinfq" sourceRef="Activity_00brnnm" targetRef="Gateway_00gps96" />
    <bpmn:sequenceFlow id="Flow_14l170w" sourceRef="Gateway_0nbqqpr" targetRef="Activity_0m1oi6g" />
    <bpmn:sequenceFlow id="Flow_1y9d7mi" sourceRef="Activity_RegistrarPagoDB" targetRef="Activity_06zg5v5" />
    <bpmn:sequenceFlow id="Flow_1j0dbx9" sourceRef="Event_067suwh" targetRef="Activity_0yj174j" />
    <bpmn:sequenceFlow id="Flow_0rf11jx" sourceRef="Activity_0yj174j" targetRef="Event_0h6leqx" />
    <bpmn:sequenceFlow id="Flow_1p63p4i" sourceRef="Activity_055uyhj" targetRef="Event_0dkq5n9" />
    <bpmn:sendTask id="Activity_055uyhj" name="Notificar cancelación de solicitud" camunda:delegateExpression="#{cancelarSolicitudDelegate}">
      <bpmn:incoming>Flow_06rpsa3</bpmn:incoming>
      <bpmn:outgoing>Flow_1p63p4i</bpmn:outgoing>
    </bpmn:sendTask>
    <bpmn:serviceTask id="Activity_1fb1qex" name="Guardar solicitud en BD">
      <bpmn:extensionElements>
        <camunda:connector>
          <camunda:inputOutput>
            <camunda:inputParameter name="url">http://localhost:8083/api/solicitudes</camunda:inputParameter>
            <camunda:inputParameter name="method">POST</camunda:inputParameter>
            <camunda:inputParameter name="headers">
              <camunda:map>
                <camunda:entry key="Content-Type">application/json</camunda:entry>
              </camunda:map>
            </camunda:inputParameter>
            <camunda:inputParameter name="payload">
              <camunda:script scriptFormat="JavaScript">var nombre = execution.getVariable("nombre");
var apellido = execution.getVariable("apellido");
var nombreCompleto = nombre + " " + apellido;

var solicitud = {
  "businessKey": execution.getBusinessKey(),
  "nombreCliente": nombreCompleto,
  "cedulaCliente": execution.getVariable("cedulaCliente"),
  "direccion": execution.getVariable("direccion"),
  "telefono": execution.getVariable("telefono"),
  "email": execution.getVariable("cliente_email"),
  "estrato": execution.getVariable("estrato")
};
JSON.stringify(solicitud);</camunda:script>
            </camunda:inputParameter>
            <camunda:outputParameter name="solicitudId">
              <camunda:script scriptFormat="JavaScript">
var response = connector.getVariable("response");
if (response) {
  var json = S(response);
  if (json.hasProp("id")) {
    json.prop("id").numberValue();
  } else {
    null;
  }
} else {
  null;
}
              </camunda:script>
            </camunda:outputParameter>
          </camunda:inputOutput>
          <camunda:connectorId>http-connector</camunda:connectorId>
        </camunda:connector>
      </bpmn:extensionElements>
      <bpmn:incoming>Flow_1nq3u56</bpmn:incoming>
      <bpmn:outgoing>Flow_1kzaz5a</bpmn:outgoing>
    </bpmn:serviceTask>
    <bpmn:exclusiveGateway id="Gateway_1lfx28d" name="Instalación correcta?">
      <bpmn:incoming>Flow_1l7q6d1</bpmn:incoming>
      <bpmn:outgoing>Flow_1iu8b8q</bpmn:outgoing>
      <bpmn:outgoing>Flow_1fhjwz7</bpmn:outgoing>
    </bpmn:exclusiveGateway>
    <bpmn:parallelGateway id="Gateway_0nbqqpr">
      <bpmn:incoming>Flow_1iu8b8q</bpmn:incoming>
      <bpmn:outgoing>Flow_14l170w</bpmn:outgoing>
      <bpmn:outgoing>Flow_03qisrd</bpmn:outgoing>
    </bpmn:parallelGateway>
    <bpmn:serviceTask id="Activity_03ums6g" name="Activar servicio">
      <bpmn:extensionElements>
        <camunda:connector>
          <camunda:inputOutput>
            <camunda:inputParameter name="url">http://localhost:8083/api/facturacion/activar?businessKey=${execution.getBusinessKey()}&amp;cedulaCliente=${execution.getVariable("cedula_cliente")}</camunda:inputParameter>
            <camunda:inputParameter name="method">POST</camunda:inputParameter>
            <camunda:outputParameter name="numeroServicio">
              <camunda:script scriptFormat="JavaScript">var response = connector.getVariable("response");

if (response) {
  var json = S(response);
  if (json.hasProp("numeroServicio")) {
    json.prop("numeroServicio").stringValue();
  } else {
    null;
  }
} else {
  null;
}</camunda:script>
            </camunda:outputParameter>
            <camunda:outputParameter name="fechaActivacion">
              <camunda:script scriptFormat="JavaScript">var response = connector.getVariable("response");

if (response) {
  var json = S(response);
  if (json.hasProp("fechaActivacion")) {
    json.prop("fechaActivacion").stringValue();
  } else {
    null;
  }
} else {
  null;
}</camunda:script>
            </camunda:outputParameter>
          </camunda:inputOutput>
          <camunda:connectorId>http-connector</camunda:connectorId>
        </camunda:connector>
      </bpmn:extensionElements>
      <bpmn:incoming>Flow_03qisrd</bpmn:incoming>
      <bpmn:outgoing>Flow_0f8i0h3</bpmn:outgoing>
    </bpmn:serviceTask>
    <bpmn:exclusiveGateway id="Gateway_1s9wwrt">
      <bpmn:incoming>Flow_0hvf0qi</bpmn:incoming>
      <bpmn:incoming>Flow_ConfirmarToGateway</bpmn:incoming>
      <bpmn:outgoing>Flow_104edbe_old</bpmn:outgoing>
    </bpmn:exclusiveGateway>
    <bpmn:serviceTask id="Task_LimpiarVariablesVerificacion" name="Limpiar variables de verificación" camunda:delegateExpression="#{limpiarVariablesVerificacionDelegate}">
      <bpmn:incoming>Flow_104edbe_old</bpmn:incoming>
      <bpmn:outgoing>Flow_104edbe</bpmn:outgoing>
    </bpmn:serviceTask>
    <bpmn:userTask id="Activity_0tp7mb7" name="Verificar instalación" camunda:formRef="verificacion-instalacion" camunda:formRefBinding="latest">
      <bpmn:incoming>Flow_104edbe</bpmn:incoming>
      <bpmn:outgoing>Flow_1l7q6d1</bpmn:outgoing>
    </bpmn:userTask>
    <bpmn:subProcess id="Activity_06zg5v5" name="Conectar servicio">
      <bpmn:incoming>Flow_1y9d7mi</bpmn:incoming>
      <bpmn:outgoing>Flow_0hvf0qi</bpmn:outgoing>
      <bpmn:userTask id="Activity_0kaut0b" name="Agendar cita de inspección" camunda:formRef="agendar-cita-inspeccion" camunda:formRefBinding="latest">
        <bpmn:incoming>Flow_1pjefe7</bpmn:incoming>
        <bpmn:outgoing>Flow_1pd3ndf</bpmn:outgoing>
      </bpmn:userTask>
      <bpmn:exclusiveGateway id="Gateway_0hnldin" name="Red interna aprobada?">
        <bpmn:incoming>Flow_0jjl0t4</bpmn:incoming>
        <bpmn:outgoing>Flow_0b3xcjt</bpmn:outgoing>
        <bpmn:outgoing>Flow_0dl3bde</bpmn:outgoing>
      </bpmn:exclusiveGateway>
      <bpmn:userTask id="Activity_1aolu0v" name="Agendar cita de instalación de tuberia y medidor" camunda:formRef="agendar-cita-instalacion" camunda:formRefBinding="latest">
        <bpmn:incoming>Flow_0b3xcjt</bpmn:incoming>
        <bpmn:outgoing>Flow_0pmmylf</bpmn:outgoing>
      </bpmn:userTask>
      <bpmn:exclusiveGateway id="Gateway_1l5zn3l">
        <bpmn:incoming>Flow_001zf0v</bpmn:incoming>
        <bpmn:incoming>Flow_111nr5n</bpmn:incoming>
        <bpmn:outgoing>Flow_1pjefe7_old</bpmn:outgoing>
      </bpmn:exclusiveGateway>
      <bpmn:scriptTask id="Task_LimpiarVariables" name="Limpiar variables de inspección" scriptFormat="javascript">
        <bpmn:incoming>Flow_1pjefe7_old</bpmn:incoming>
        <bpmn:outgoing>Flow_1pjefe7</bpmn:outgoing>
        <bpmn:script>// Limpiar variables del formulario de agendar inspección
execution.removeVariable("fecha_inspeccion");
execution.removeVariable("observaciones_inspeccion");

// Limpiar variables del formulario de resultado de inspección
execution.removeVariable("fecha_inspeccion_realizada");
execution.removeVariable("inspector");
execution.removeVariable("red_aprobada");
execution.removeVariable("estado_instalaciones");
execution.removeVariable("observaciones_inspeccion_result");
execution.removeVariable("cumple_normativa");
execution.removeVariable("defectos_encontrados");

// Limpiar variables del formulario de solicitar corrección
execution.removeVariable("descripcion_cambios");
execution.removeVariable("fecha_limite_correccion");</bpmn:script>
      </bpmn:scriptTask>
      <bpmn:task id="Activity_1f5lexa" name="Instalar tuberia y medidor">
        <bpmn:incoming>Flow_0pmmylf</bpmn:incoming>
        <bpmn:outgoing>Flow_0b4lxcx</bpmn:outgoing>
      </bpmn:task>
      <bpmn:userTask id="Activity_11dppxs" name="Solicitar corrección al cliente" camunda:formRef="solicitar-correccion" camunda:formRefBinding="latest">
        <bpmn:incoming>Flow_0dl3bde</bpmn:incoming>
        <bpmn:outgoing>Flow_001zf0v</bpmn:outgoing>
      </bpmn:userTask>
      <bpmn:userTask id="Activity_0qh82fn" name="Inspeccionar red interna" camunda:formRef="resultado-inspeccion" camunda:formRefBinding="latest">
        <bpmn:incoming>Flow_1pd3ndf</bpmn:incoming>
        <bpmn:outgoing>Flow_0jjl0t4</bpmn:outgoing>
      </bpmn:userTask>
      <bpmn:sequenceFlow id="Flow_1pjefe7_old" sourceRef="Gateway_1l5zn3l" targetRef="Task_LimpiarVariables" />
      <bpmn:sequenceFlow id="Flow_1pjefe7" sourceRef="Task_LimpiarVariables" targetRef="Activity_0kaut0b" />
      <bpmn:sequenceFlow id="Flow_1pd3ndf" sourceRef="Activity_0kaut0b" targetRef="Activity_0qh82fn" />
      <bpmn:sequenceFlow id="Flow_0jjl0t4" sourceRef="Activity_0qh82fn" targetRef="Gateway_0hnldin" />
      <bpmn:sequenceFlow id="Flow_0b3xcjt" name="si" sourceRef="Gateway_0hnldin" targetRef="Activity_1aolu0v">
        <bpmn:conditionExpression xsi:type="bpmn:tFormalExpression">${red_aprobada == "true"}</bpmn:conditionExpression>
      </bpmn:sequenceFlow>
      <bpmn:sequenceFlow id="Flow_0dl3bde" name="no" sourceRef="Gateway_0hnldin" targetRef="Activity_11dppxs">
        <bpmn:conditionExpression xsi:type="bpmn:tFormalExpression">${red_aprobada == "false"}</bpmn:conditionExpression>
      </bpmn:sequenceFlow>
      <bpmn:sequenceFlow id="Flow_0pmmylf" sourceRef="Activity_1aolu0v" targetRef="Activity_1f5lexa" />
      <bpmn:sequenceFlow id="Flow_001zf0v" sourceRef="Activity_11dppxs" targetRef="Gateway_1l5zn3l" />
      <bpmn:startEvent id="Event_0zbthkk" name="Pago Recibido">
        <bpmn:outgoing>Flow_111nr5n</bpmn:outgoing>
      </bpmn:startEvent>
      <bpmn:sequenceFlow id="Flow_111nr5n" sourceRef="Event_0zbthkk" targetRef="Gateway_1l5zn3l" />
      <bpmn:endEvent id="Event_0svxnrp" name="Instalacion realizada">
        <bpmn:incoming>Flow_0b4lxcx</bpmn:incoming>
      </bpmn:endEvent>
      <bpmn:sequenceFlow id="Flow_0b4lxcx" sourceRef="Activity_1f5lexa" targetRef="Event_0svxnrp" />
    </bpmn:subProcess>
    <bpmn:sequenceFlow id="Flow_1l7q6d1" sourceRef="Activity_0tp7mb7" targetRef="Gateway_1lfx28d" />
    <bpmn:sequenceFlow id="Flow_1iu8b8q" name="si" sourceRef="Gateway_1lfx28d" targetRef="Gateway_0nbqqpr">
      <bpmn:conditionExpression xsi:type="bpmn:tFormalExpression">${instalacion_correcta == true}</bpmn:conditionExpression>
    </bpmn:sequenceFlow>
    <bpmn:sequenceFlow id="Flow_1fhjwz7" name="no" sourceRef="Gateway_1lfx28d" targetRef="Activity_11hbts6">
      <bpmn:conditionExpression xsi:type="bpmn:tFormalExpression">${instalacion_correcta == false}</bpmn:conditionExpression>
    </bpmn:sequenceFlow>
    <bpmn:sequenceFlow id="Flow_0dd4nvu" sourceRef="Gateway_0jemd6s" targetRef="Event_1rrkmi5" />
    <bpmn:sequenceFlow id="Flow_03qisrd" sourceRef="Gateway_0nbqqpr" targetRef="Activity_03ums6g" />
    <bpmn:sequenceFlow id="Flow_0f8i0h3" sourceRef="Activity_03ums6g" targetRef="Activity_RegistrarPago" />
    <bpmn:sequenceFlow id="Flow_0hvf0qi" sourceRef="Activity_06zg5v5" targetRef="Gateway_1s9wwrt" />
    <bpmn:sequenceFlow id="Flow_104edbe_old" sourceRef="Gateway_1s9wwrt" targetRef="Task_LimpiarVariablesVerificacion" />
    <bpmn:sequenceFlow id="Flow_104edbe" sourceRef="Task_LimpiarVariablesVerificacion" targetRef="Activity_0tp7mb7" />
    <bpmn:endEvent id="Event_1rrkmi5" name="Servicio activado">
      <bpmn:incoming>Flow_0dd4nvu</bpmn:incoming>
    </bpmn:endEvent>
    <bpmn:parallelGateway id="Gateway_0jemd6s">
      <bpmn:incoming>Flow_07wh6h9</bpmn:incoming>
      <bpmn:incoming>Flow_00iqd9s</bpmn:incoming>
      <bpmn:outgoing>Flow_0dd4nvu</bpmn:outgoing>
    </bpmn:parallelGateway>
    <bpmn:sequenceFlow id="Flow_1xfk6vi" sourceRef="Activity_0zzargi" targetRef="Activity_RegistrarPagoDB" />
    <bpmn:serviceTask id="Activity_RegistrarPago" name="Registrar cliente en BD">
      <bpmn:extensionElements>
        <camunda:connector>
          <camunda:inputOutput>
            <camunda:inputParameter name="url">http://localhost:8083/api/clientes</camunda:inputParameter>
            <camunda:inputParameter name="method">POST</camunda:inputParameter>
            <camunda:inputParameter name="headers">
              <camunda:map>
                <camunda:entry key="Content-Type">application/json</camunda:entry>
              </camunda:map>
            </camunda:inputParameter>
            <camunda:inputParameter name="payload">
              <camunda:script scriptFormat="JavaScript">var cliente = {
  "cedula": execution.getVariable("cedulaCliente"),
  "nombre": execution.getVariable("nombre"),
  "direccion": execution.getVariable("direccion"),
  "ciudad": execution.getVariable("ciudad"),
  "estrato": execution.getVariable("estrato"),
  "telefono": execution.getVariable("telefono"),
  "email": execution.getVariable("cliente_email")
};
JSON.stringify(cliente);</camunda:script>
            </camunda:inputParameter>
            <camunda:outputParameter name="clienteId">
              <camunda:script scriptFormat="JavaScript">var response = connector.getVariable("response");
if (response) {
  var json = S(response);
  if (json.hasProp("id")) {
    json.prop("id").numberValue();
  } else {
    null;
  }
} else {
  null;
}</camunda:script>
            </camunda:outputParameter>
          </camunda:inputOutput>
          <camunda:connectorId>http-connector</camunda:connectorId>
        </camunda:connector>
      </bpmn:extensionElements>
      <bpmn:incoming>Flow_0f8i0h3</bpmn:incoming>
      <bpmn:outgoing>Flow_07wh6h9</bpmn:outgoing>
    </bpmn:serviceTask>
    <bpmn:sequenceFlow id="Flow_07wh6h9" sourceRef="Activity_RegistrarPago" targetRef="Gateway_0jemd6s" />
    <bpmn:sequenceFlow id="Flow_00iqd9s" sourceRef="Activity_0m1oi6g" targetRef="Gateway_0jemd6s" />
    <bpmn:userTask id="Activity_0m1oi6g" name="Registrar en sistema de faturación" camunda:formRef="alta-facturacion" camunda:formRefBinding="latest">
      <bpmn:incoming>Flow_14l170w</bpmn:incoming>
      <bpmn:outgoing>Flow_00iqd9s</bpmn:outgoing>
    </bpmn:userTask>
    <bpmn:sendTask id="Activity_11hbts6" name="Notificar Problemas de instalación" camunda:delegateExpression="#{notificarProblemasInstalacionDelegate}">
      <bpmn:incoming>Flow_1fhjwz7</bpmn:incoming>
      <bpmn:outgoing>Flow_NotificarToConfirmar</bpmn:outgoing>
    </bpmn:sendTask>
    <bpmn:sequenceFlow id="Flow_NotificarToConfirmar" sourceRef="Activity_11hbts6" targetRef="Activity_ConfirmarInstalacion" />
    <bpmn:userTask id="Activity_ConfirmarInstalacion" name="Confirmar instalación corregida" camunda:formRef="confirmar-instalacion-realizada" camunda:formRefBinding="latest">
      <bpmn:incoming>Flow_NotificarToConfirmar</bpmn:incoming>
      <bpmn:outgoing>Flow_ConfirmarToGateway</bpmn:outgoing>
    </bpmn:userTask>
    <bpmn:sequenceFlow id="Flow_ConfirmarToGateway" sourceRef="Activity_ConfirmarInstalacion" targetRef="Gateway_1s9wwrt" />
  </bpmn:process>
  <bpmndi:BPMNDiagram id="BPMNDiagram_1">
    <bpmndi:BPMNPlane id="BPMNPlane_1" bpmnElement="Collaboration_0v8kt2o">
      <bpmndi:BPMNShape id="Participant_1b1qflu_di" bpmnElement="Participant_1b1qflu" isHorizontal="true">
        <dc:Bounds x="160" y="80" width="3250" height="970" />
        <bpmndi:BPMNLabel />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="Lane_1bavo0y_di" bpmnElement="Lane_1bavo0y" isHorizontal="true">
        <dc:Bounds x="190" y="200" width="3220" height="360" />
        <bpmndi:BPMNLabel />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="Lane_08ikb7q_di" bpmnElement="Lane_08ikb7q" isHorizontal="true">
        <dc:Bounds x="190" y="560" width="3220" height="250" />
        <bpmndi:BPMNLabel />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="Lane_1nl7999_di" bpmnElement="Lane_1nl7999" isHorizontal="true">
        <dc:Bounds x="190" y="80" width="3220" height="120" />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="Lane_0w8w1ma_di" bpmnElement="Lane_0w8w1ma" isHorizontal="true">
        <dc:Bounds x="190" y="810" width="3220" height="240" />
        <bpmndi:BPMNLabel />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="Event_16lrzvl_di" bpmnElement="Event_0jslj8w">
        <dc:Bounds x="242" y="112" width="36" height="36" />
        <bpmndi:BPMNLabel>
          <dc:Bounds x="217" y="155" width="86" height="27" />
        </bpmndi:BPMNLabel>
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="Activity_15qhpg1_di" bpmnElement="Activity_15qhpg1">
        <dc:Bounds x="340" y="90" width="100" height="80" />
        <bpmndi:BPMNLabel />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="Activity_1023550_di" bpmnElement="Activity_0l33lbs">
        <dc:Bounds x="930" y="670" width="100" height="80" />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="Activity_1tojk30_di" bpmnElement="Activity_1t7kyo3">
        <dc:Bounds x="880" y="270" width="100" height="80" />
        <bpmndi:BPMNLabel />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="BPMNShape_1sshh3x" bpmnElement="Gateway_084d3e1" isMarkerVisible="true">
        <dc:Bounds x="1285" y="285" width="50" height="50" />
        <bpmndi:BPMNLabel>
          <dc:Bounds x="1244" y="276" width="52" height="27" />
        </bpmndi:BPMNLabel>
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="BPMNShape_1wst4z8" bpmnElement="Activity_0kcw96s">
        <dc:Bounds x="1030" y="90" width="100" height="80" />
        <bpmndi:BPMNLabel />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="Activity_00brnnm_di" bpmnElement="Activity_00brnnm">
        <dc:Bounds x="650" y="670" width="100" height="80" />
        <bpmndi:BPMNLabel />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="Gateway_00gps96_di" bpmnElement="Gateway_00gps96" isMarkerVisible="true">
        <dc:Bounds x="795" y="685" width="50" height="50" />
        <bpmndi:BPMNLabel>
          <dc:Bounds x="779" y="741" width="83" height="27" />
        </bpmndi:BPMNLabel>
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="Event_1bf9n2z_di" bpmnElement="Event_1bf9n2z">
        <dc:Bounds x="1082" y="692" width="36" height="36" />
        <bpmndi:BPMNLabel>
          <dc:Bounds x="1064" y="735" width="72" height="40" />
        </bpmndi:BPMNLabel>
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="BPMNShape_1ngig67" bpmnElement="Activity_0yj174j">
        <dc:Bounds x="1200" y="420" width="100" height="80" />
        <bpmndi:BPMNLabel />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="Event_02intwm_di" bpmnElement="Event_0h6leqx">
        <dc:Bounds x="1362" y="442" width="36" height="36" />
        <bpmndi:BPMNLabel>
          <dc:Bounds x="1352" y="485" width="56" height="27" />
        </bpmndi:BPMNLabel>
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="BPMNShape_1d9883j" bpmnElement="Activity_0zzargi">
        <dc:Bounds x="1410" y="350" width="100" height="80" />
        <bpmndi:BPMNLabel />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="Activity_RegistrarPagoDB_di" bpmnElement="Activity_RegistrarPagoDB">
        <dc:Bounds x="1710" y="350" width="100" height="80" />
        <bpmndi:BPMNLabel />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="Event_04qbwdk_di" bpmnElement="Event_0dkq5n9">
        <dc:Bounds x="1532" y="232" width="36" height="36" />
        <bpmndi:BPMNLabel>
          <dc:Bounds x="1524" y="276" width="52" height="27" />
        </bpmndi:BPMNLabel>
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="Activity_10bv6wf_di" bpmnElement="Activity_055uyhj">
        <dc:Bounds x="1360" y="210" width="100" height="80" />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="Activity_0hl2wmk_di" bpmnElement="Activity_1fb1qex">
        <dc:Bounds x="480" y="90" width="100" height="80" />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="Gateway_1lfx28d_di" bpmnElement="Gateway_1lfx28d" isMarkerVisible="true">
        <dc:Bounds x="2465" y="695" width="50" height="50" />
        <bpmndi:BPMNLabel>
          <dc:Bounds x="2523" y="707" width="53" height="27" />
        </bpmndi:BPMNLabel>
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="Gateway_0tfwm52_di" bpmnElement="Gateway_0nbqqpr">
        <dc:Bounds x="2605" y="915" width="50" height="50" />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="BPMNShape_154udkw" bpmnElement="Activity_03ums6g">
        <dc:Bounds x="2680" y="830" width="100" height="80" />
        <bpmndi:BPMNLabel />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="Gateway_1s9wwrt_di" bpmnElement="Gateway_1s9wwrt" isMarkerVisible="true">
        <dc:Bounds x="2085" y="695" width="50" height="50" />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="Task_LimpiarVariablesVerificacion_di" bpmnElement="Task_LimpiarVariablesVerificacion">
        <dc:Bounds x="2160" y="680" width="100" height="80" />
        <bpmndi:BPMNLabel />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="Activity_0tp7mb7_di" bpmnElement="Activity_0tp7mb7">
        <dc:Bounds x="2330" y="680" width="100" height="80" />
        <bpmndi:BPMNLabel />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="Activity_07avgdq_di" bpmnElement="Activity_06zg5v5">
        <dc:Bounds x="1910" y="680" width="100" height="80" />
        <bpmndi:BPMNLabel />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="Event_1rrkmi5_di" bpmnElement="Event_1rrkmi5">
        <dc:Bounds x="3032" y="922" width="36" height="36" />
        <bpmndi:BPMNLabel>
          <dc:Bounds x="3008" y="965" width="84" height="14" />
        </bpmndi:BPMNLabel>
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="BPMNShape_1h6i7gd" bpmnElement="Gateway_0jemd6s">
        <dc:Bounds x="2945" y="915" width="50" height="50" />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="Activity_RegistrarPago_di" bpmnElement="Activity_RegistrarPago">
        <dc:Bounds x="2830" y="830" width="100" height="80" />
        <bpmndi:BPMNLabel />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="Activity_0m1oi6g_di" bpmnElement="Activity_0m1oi6g">
        <dc:Bounds x="2760" y="950" width="100" height="80" />
        <bpmndi:BPMNLabel />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="Activity_1hs7ugs_di" bpmnElement="Activity_11hbts6">
        <dc:Bounds x="2550" y="620" width="100" height="80" />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="Activity_ConfirmarInstalacion_di" bpmnElement="Activity_ConfirmarInstalacion">
        <dc:Bounds x="2700" y="620" width="100" height="80" />
        <bpmndi:BPMNLabel />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="BPMNShape_1rasnp4" bpmnElement="Event_067suwh">
        <dc:Bounds x="1112" y="152" width="36" height="36" />
        <bpmndi:BPMNLabel>
          <dc:Bounds x="1144" y="183" width="31" height="14" />
        </bpmndi:BPMNLabel>
      </bpmndi:BPMNShape>
      <bpmndi:BPMNEdge id="Flow_0cts4f7_di" bpmnElement="Flow_0cts4f7">
        <di:waypoint x="278" y="130" />
        <di:waypoint x="340" y="130" />
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="Flow_1nq3u56_di" bpmnElement="Flow_1nq3u56">
        <di:waypoint x="440" y="130" />
        <di:waypoint x="480" y="130" />
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="Flow_1kzaz5a_di" bpmnElement="Flow_1kzaz5a">
        <di:waypoint x="580" y="130" />
        <di:waypoint x="600" y="130" />
        <di:waypoint x="600" y="710" />
        <di:waypoint x="650" y="710" />
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="Flow_0wgmzpg_di" bpmnElement="Flow_0wgmzpg">
        <di:waypoint x="845" y="710" />
        <di:waypoint x="930" y="710" />
        <bpmndi:BPMNLabel>
          <dc:Bounds x="871" y="692" width="13" height="14" />
        </bpmndi:BPMNLabel>
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="Flow_1s900fz_di" bpmnElement="Flow_1s900fz">
        <di:waypoint x="1030" y="710" />
        <di:waypoint x="1082" y="710" />
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="Flow_1u7ybih_di" bpmnElement="Flow_1u7ybih">
        <di:waypoint x="820" y="685" />
        <di:waypoint x="820" y="310" />
        <di:waypoint x="880" y="310" />
        <bpmndi:BPMNLabel>
          <dc:Bounds x="833" y="336" width="8" height="14" />
        </bpmndi:BPMNLabel>
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="Flow_1bz2fvf_di" bpmnElement="Flow_1bz2fvf">
        <di:waypoint x="980" y="310" />
        <di:waypoint x="1005" y="310" />
        <di:waypoint x="1005" y="130" />
        <di:waypoint x="1030" y="130" />
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="BPMNEdge_0aik87n" bpmnElement="Flow_0ho7m4x">
        <di:waypoint x="1130" y="130" />
        <di:waypoint x="1210" y="130" />
        <di:waypoint x="1210" y="310" />
        <di:waypoint x="1285" y="310" />
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="BPMNEdge_0nnnt7p" bpmnElement="Flow_06rpsa3">
        <di:waypoint x="1310" y="285" />
        <di:waypoint x="1310" y="250" />
        <di:waypoint x="1360" y="250" />
        <bpmndi:BPMNLabel>
          <dc:Bounds x="1319" y="233" width="13" height="14" />
        </bpmndi:BPMNLabel>
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="BPMNEdge_1u00h5w" bpmnElement="Flow_03r38nm">
        <di:waypoint x="1310" y="335" />
        <di:waypoint x="1310" y="390" />
        <di:waypoint x="1410" y="390" />
        <bpmndi:BPMNLabel>
          <dc:Bounds x="1322" y="373" width="8" height="14" />
        </bpmndi:BPMNLabel>
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="Flow_1ecinfq_di" bpmnElement="Flow_1ecinfq">
        <di:waypoint x="750" y="710" />
        <di:waypoint x="795" y="710" />
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="Flow_14l170w_di" bpmnElement="Flow_14l170w">
        <di:waypoint x="2630" y="965" />
        <di:waypoint x="2630" y="990" />
        <di:waypoint x="2760" y="990" />
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="Flow_1y9d7mi_di" bpmnElement="Flow_1y9d7mi">
        <di:waypoint x="1810" y="390" />
        <di:waypoint x="1850" y="390" />
        <di:waypoint x="1850" y="720" />
        <di:waypoint x="1910" y="720" />
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="BPMNEdge_069ea6j" bpmnElement="Flow_1j0dbx9">
        <di:waypoint x="1130" y="188" />
        <di:waypoint x="1130" y="460" />
        <di:waypoint x="1200" y="460" />
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="BPMNEdge_1obz47f" bpmnElement="Flow_0rf11jx">
        <di:waypoint x="1300" y="460" />
        <di:waypoint x="1362" y="460" />
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="BPMNEdge_1fbpc8r" bpmnElement="Flow_1p63p4i">
        <di:waypoint x="1460" y="250" />
        <di:waypoint x="1532" y="250" />
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="Flow_1l7q6d1_di" bpmnElement="Flow_1l7q6d1">
        <di:waypoint x="2430" y="720" />
        <di:waypoint x="2465" y="720" />
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="Flow_1iu8b8q_di" bpmnElement="Flow_1iu8b8q">
        <di:waypoint x="2490" y="745" />
        <di:waypoint x="2490" y="940" />
        <di:waypoint x="2605" y="940" />
        <bpmndi:BPMNLabel>
          <dc:Bounds x="2502" y="914" width="9" height="14" />
        </bpmndi:BPMNLabel>
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="Flow_1fhjwz7_di" bpmnElement="Flow_1fhjwz7">
        <di:waypoint x="2490" y="695" />
        <di:waypoint x="2490" y="660" />
        <di:waypoint x="2550" y="660" />
        <bpmndi:BPMNLabel>
          <dc:Bounds x="2499" y="674" width="13" height="14" />
        </bpmndi:BPMNLabel>
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="Flow_0dd4nvu_di" bpmnElement="Flow_0dd4nvu">
        <di:waypoint x="2995" y="940" />
        <di:waypoint x="3032" y="940" />
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="Flow_03qisrd_di" bpmnElement="Flow_03qisrd">
        <di:waypoint x="2630" y="915" />
        <di:waypoint x="2630" y="870" />
        <di:waypoint x="2680" y="870" />
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="Flow_0f8i0h3_di" bpmnElement="Flow_0f8i0h3">
        <di:waypoint x="2780" y="870" />
        <di:waypoint x="2830" y="870" />
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="Flow_0hvf0qi_di" bpmnElement="Flow_0hvf0qi">
        <di:waypoint x="2010" y="720" />
        <di:waypoint x="2085" y="720" />
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="Flow_104edbe_old_di" bpmnElement="Flow_104edbe_old">
        <di:waypoint x="2135" y="720" />
        <di:waypoint x="2160" y="720" />
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="Flow_104edbe_di" bpmnElement="Flow_104edbe">
        <di:waypoint x="2260" y="720" />
        <di:waypoint x="2330" y="720" />
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="Flow_1xfk6vi_di" bpmnElement="Flow_1xfk6vi">
        <di:waypoint x="1510" y="390" />
        <di:waypoint x="1710" y="390" />
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="Flow_07wh6h9_di" bpmnElement="Flow_07wh6h9">
        <di:waypoint x="2930" y="870" />
        <di:waypoint x="2970" y="870" />
        <di:waypoint x="2970" y="915" />
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="Flow_00iqd9s_di" bpmnElement="Flow_00iqd9s">
        <di:waypoint x="2860" y="990" />
        <di:waypoint x="2970" y="990" />
        <di:waypoint x="2970" y="965" />
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="Flow_NotificarToConfirmar_di" bpmnElement="Flow_NotificarToConfirmar">
        <di:waypoint x="2650" y="660" />
        <di:waypoint x="2700" y="660" />
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="Flow_ConfirmarToGateway_di" bpmnElement="Flow_ConfirmarToGateway">
        <di:waypoint x="2800" y="660" />
        <di:waypoint x="2880" y="660" />
        <di:waypoint x="2880" y="600" />
        <di:waypoint x="2110" y="600" />
        <di:waypoint x="2110" y="695" />
      </bpmndi:BPMNEdge>
    </bpmndi:BPMNPlane>
  </bpmndi:BPMNDiagram>
  <bpmndi:BPMNDiagram id="BPMNDiagram_1h7f86k">
    <bpmndi:BPMNPlane id="BPMNPlane_0uoquf0" bpmnElement="Activity_1t7kyo3">
      <bpmndi:BPMNShape id="Event_02ojq7g_di" bpmnElement="Event_02ojq7g">
        <dc:Bounds x="202" y="107" width="36" height="36" />
        <bpmndi:BPMNLabel>
          <dc:Bounds x="177" y="150" width="87" height="27" />
        </bpmndi:BPMNLabel>
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="Activity_1t7kyo3_di" bpmnElement="Activity_1o1qnmd">
        <dc:Bounds x="310" y="85" width="100" height="80" />
        <bpmndi:BPMNLabel />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="Event_0216onw_di" bpmnElement="Event_0216onw">
        <dc:Bounds x="652" y="107" width="36" height="36" />
        <bpmndi:BPMNLabel>
          <dc:Bounds x="644" y="150" width="52" height="27" />
        </bpmndi:BPMNLabel>
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="Activity_0m9u12l_di" bpmnElement="Activity_0068azp">
        <dc:Bounds x="510" y="85" width="100" height="80" />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNEdge id="Flow_1ks2bm8_di" bpmnElement="Flow_1ks2bm8">
        <di:waypoint x="238" y="125" />
        <di:waypoint x="310" y="125" />
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="Flow_0j7gz72_di" bpmnElement="Flow_0j7gz72">
        <di:waypoint x="610" y="125" />
        <di:waypoint x="652" y="125" />
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="Flow_1wgzvas_di" bpmnElement="Flow_1wgzvas">
        <di:waypoint x="410" y="125" />
        <di:waypoint x="510" y="125" />
      </bpmndi:BPMNEdge>
    </bpmndi:BPMNPlane>
  </bpmndi:BPMNDiagram>
  <bpmndi:BPMNDiagram id="BPMNDiagram_1t08tre">
    <bpmndi:BPMNPlane id="BPMNPlane_1x4algi" bpmnElement="Activity_06zg5v5">
      <bpmndi:BPMNShape id="BPMNShape_09k048r" bpmnElement="Activity_0kaut0b">
        <dc:Bounds x="520" y="190" width="100" height="80" />
        <bpmndi:BPMNLabel />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="BPMNShape_19elqcf" bpmnElement="Gateway_0hnldin" isMarkerVisible="true">
        <dc:Bounds x="815" y="205" width="50" height="50" />
        <bpmndi:BPMNLabel>
          <dc:Bounds x="881" y="216" width="58" height="27" />
        </bpmndi:BPMNLabel>
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="BPMNShape_1cer5b3" bpmnElement="Activity_1aolu0v">
        <dc:Bounds x="920" y="260" width="100" height="80" />
        <bpmndi:BPMNLabel />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="BPMNShape_0ch0aiw" bpmnElement="Gateway_1l5zn3l" isMarkerVisible="true">
        <dc:Bounds x="255" y="205" width="50" height="50" />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="Task_LimpiarVariables_di" bpmnElement="Task_LimpiarVariables">
        <dc:Bounds x="360" y="190" width="100" height="80" />
        <bpmndi:BPMNLabel />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="BPMNShape_1fmrtxq" bpmnElement="Activity_1f5lexa">
        <dc:Bounds x="1070" y="260" width="100" height="80" />
        <bpmndi:BPMNLabel />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="BPMNShape_19rbx9k" bpmnElement="Activity_11dppxs">
        <dc:Bounds x="920" y="110" width="100" height="80" />
        <bpmndi:BPMNLabel />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="Activity_0qh82fn_di" bpmnElement="Activity_0qh82fn">
        <dc:Bounds x="670" y="190" width="100" height="80" />
        <bpmndi:BPMNLabel />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="Event_0zbthkk_di" bpmnElement="Event_0zbthkk">
        <dc:Bounds x="172" y="212" width="36" height="36" />
        <bpmndi:BPMNLabel>
          <dc:Bounds x="154" y="255" width="72" height="14" />
        </bpmndi:BPMNLabel>
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="Event_0svxnrp_di" bpmnElement="Event_0svxnrp">
        <dc:Bounds x="1212" y="282" width="36" height="36" />
        <bpmndi:BPMNLabel>
          <dc:Bounds x="1204" y="325" width="53" height="27" />
        </bpmndi:BPMNLabel>
      </bpmndi:BPMNShape>
      <bpmndi:BPMNEdge id="Flow_1pjefe7_old_di" bpmnElement="Flow_1pjefe7_old">
        <di:waypoint x="305" y="230" />
        <di:waypoint x="360" y="230" />
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="Flow_1pjefe7_di" bpmnElement="Flow_1pjefe7">
        <di:waypoint x="460" y="230" />
        <di:waypoint x="520" y="230" />
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="BPMNEdge_01225pq" bpmnElement="Flow_1pd3ndf">
        <di:waypoint x="620" y="230" />
        <di:waypoint x="670" y="230" />
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="Flow_0jjl0t4_di" bpmnElement="Flow_0jjl0t4">
        <di:waypoint x="770" y="230" />
        <di:waypoint x="815" y="230" />
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="BPMNEdge_1fmuzr2" bpmnElement="Flow_0b3xcjt">
        <di:waypoint x="840" y="255" />
        <di:waypoint x="840" y="300" />
        <di:waypoint x="920" y="300" />
        <bpmndi:BPMNLabel>
          <dc:Bounds x="846" y="263" width="8" height="14" />
        </bpmndi:BPMNLabel>
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="BPMNEdge_0d8w36i" bpmnElement="Flow_0dl3bde">
        <di:waypoint x="840" y="205" />
        <di:waypoint x="840" y="150" />
        <di:waypoint x="920" y="150" />
        <bpmndi:BPMNLabel>
          <dc:Bounds x="849" y="175" width="13" height="14" />
        </bpmndi:BPMNLabel>
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="BPMNEdge_17wl0bo" bpmnElement="Flow_0pmmylf">
        <di:waypoint x="1020" y="300" />
        <di:waypoint x="1070" y="300" />
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="BPMNEdge_023s9yh" bpmnElement="Flow_001zf0v">
        <di:waypoint x="1020" y="150" />
        <di:waypoint x="1080" y="150" />
        <di:waypoint x="1080" y="80" />
        <di:waypoint x="280" y="80" />
        <di:waypoint x="280" y="205" />
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="Flow_111nr5n_di" bpmnElement="Flow_111nr5n">
        <di:waypoint x="208" y="230" />
        <di:waypoint x="255" y="230" />
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="Flow_0b4lxcx_di" bpmnElement="Flow_0b4lxcx">
        <di:waypoint x="1170" y="300" />
        <di:waypoint x="1212" y="300" />
      </bpmndi:BPMNEdge>
    </bpmndi:BPMNPlane>
  </bpmndi:BPMNDiagram>
</bpmn:definitions>
